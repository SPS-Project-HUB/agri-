<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vehicle Control Panel</title>
<style>
:root {
  --primary-green: #2e7d32;
  --light-green: #4caf50;
  --dark-green: #1b5e20;
  --warning-red: #e53935;
  --neutral-gray: #757575;
  --card-bg: #ffffff;
  --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #f5f9f5 0%, #e8f5e9 100%);
  color: #333;
  line-height: 1.6;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 15px;
}

.container {
  width: 100%;
  max-width: 420px;
  margin: 0 auto;
}

/* Card Styling */
.card {
  background: var(--card-bg);
  border-radius: 16px;
  padding: 25px;
  box-shadow: var(--shadow);
  border-top: 5px solid var(--primary-green);
}

/* Header */
.header {
  text-align: center;
  margin-bottom: 25px;
}

.title {
  color: var(--dark-green);
  font-size: 1.6rem;
  font-weight: 700;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.title i {
  color: var(--primary-green);
  font-size: 1.8rem;
}

.subtitle {
  color: var(--neutral-gray);
  font-size: 0.95rem;
}

/* Control Grid - Compact Design */
.control-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 20px;
}

/* Center cell for STOP button */
.center-cell {
  grid-column: 2;
  grid-row: 2;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Button Styling */
.control-btn {
  width: 100%;
  height: 60px;
  border: none;
  border-radius: 10px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px;
}

.control-btn:active {
  transform: scale(0.97);
}

/* Direction Buttons */
.direction-btn {
  background: var(--light-green);
  color: white;
}

.direction-btn:hover {
  background: var(--primary-green);
}

.direction-btn i {
  font-size: 1.3rem;
}

/* Stop Button */
.stop-btn {
  background: var(--warning-red);
  color: white;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  font-size: 1rem;
  font-weight: 700;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  box-shadow: 0 3px 6px rgba(229, 57, 53, 0.3);
}

.stop-btn:hover {
  background: #c62828;
  box-shadow: 0 5px 10px rgba(229, 57, 53, 0.4);
}

.stop-btn i {
  font-size: 1.6rem;
}

/* Auto Mode Button */
.auto-btn {
  background: var(--neutral-gray);
  color: white;
  grid-column: 1 / -1;
  height: 50px;
  flex-direction: row;
  gap: 10px;
  margin-top: 5px;
}

.auto-btn:hover {
  background: #616161;
}

.auto-btn i {
  font-size: 1.2rem;
}

/* Button Labels */
.btn-label {
  font-size: 0.85rem;
  font-weight: 500;
}

/* Status Indicator */
.status-indicator {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 15px;
  background: #f9f9f9;
  border-radius: 8px;
  margin-top: 15px;
  font-size: 0.85rem;
}

.status-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #4caf50;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}

.status-text {
  color: var(--neutral-gray);
}

/* Responsive Design */
@media (max-width: 480px) {
  .container {
    max-width: 100%;
  }
  
  .card {
    padding: 20px;
  }
  
  .control-btn {
    height: 55px;
  }
  
  .stop-btn {
    width: 70px;
    height: 70px;
  }
  
  .title {
    font-size: 1.4rem;
  }
  
  .subtitle {
    font-size: 0.9rem;
  }
}

/* Animation for button press */
@keyframes buttonPress {
  0% { transform: scale(1); }
  50% { transform: scale(0.96); }
  100% { transform: scale(1); }
}

.button-press {
  animation: buttonPress 0.15s ease;
}

/* Compact info section */
.info-section {
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid #eee;
  font-size: 0.8rem;
  color: var(--neutral-gray);
  text-align: center;
}

.info-section p {
  margin: 5px 0;
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<div class="container">
  <div class="card">
    <!-- Header -->
    <div class="header">
      <h1 class="title">
        <i class="fas fa-tractor"></i>
        Vehicle Control
      </h1>
      <p class="subtitle">Manual control of the agricultural vehicle</p>
    </div>
    
    <!-- Control Grid -->
    <div class="control-grid">
      <!-- Forward Button -->
      <button class="control-btn direction-btn" id="forward-btn">
        <i class="fas fa-arrow-up"></i>
        <span class="btn-label">Forward</span>
      </button>
      
      <!-- Empty cell for grid alignment -->
      <div></div>
      
      <!-- Left Button -->
      <button class="control-btn direction-btn" id="left-btn">
        <i class="fas fa-arrow-left"></i>
        <span class="btn-label">Left</span>
      </button>
      
      <!-- Stop Button (centered) -->
      <div class="center-cell">
        <button class="stop-btn" id="stop-btn">
          <i class="fas fa-stop"></i>
          <span class="btn-label">STOP</span>
        </button>
      </div>
      
      <!-- Right Button -->
      <button class="control-btn direction-btn" id="right-btn">
        <i class="fas fa-arrow-right"></i>
        <span class="btn-label">Right</span>
      </button>
      
      <!-- Empty cell for grid alignment -->
      <div></div>
      
      <!-- Backward Button -->
      <button class="control-btn direction-btn" id="backward-btn">
        <i class="fas fa-arrow-down"></i>
        <span class="btn-label">Backward</span>
      </button>
    </div>
    
    <!-- Auto Mode Button -->
    <button class="control-btn auto-btn" id="auto-btn">
      <i class="fas fa-robot"></i>
      <span class="btn-label">Auto Mode</span>
    </button>
    
    <!-- Status Indicator -->
    <div class="status-indicator">
      <div class="status-dot"></div>
      <div class="status-text" id="status-text">System Ready • Press any control button</div>
    </div>
    
    <!-- Compact Info Section -->
    <div class="info-section">
      <p>Use arrow keys or WASD for keyboard controls</p>
      <p>Press SPACE for emergency stop</p>
    </div>
  </div>
</div>

<script>
// Get all control buttons
const forwardBtn = document.getElementById('forward-btn');
const leftBtn = document.getElementById('left-btn');
const rightBtn = document.getElementById('right-btn');
const backwardBtn = document.getElementById('backward-btn');
const stopBtn = document.getElementById('stop-btn');
const autoBtn = document.getElementById('auto-btn');
const statusText = document.getElementById('status-text');

// Function to simulate button press animation and update status
function handleControl(command) {
  // Add press animation
  event.target.classList.add('button-press');
  setTimeout(() => {
    event.target.classList.remove('button-press');
  }, 150);
  
  // Update status text
  const now = new Date();
  const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
  statusText.textContent = `Command: ${command} • ${timeString}`;
  
  // Change status dot color to indicate activity
  const statusDot = document.querySelector('.status-dot');
  statusDot.style.background = '#ff9800';
  
  // Return to green after 1.5 seconds
  setTimeout(() => {
    statusDot.style.background = '#4caf50';
  }, 1500);
  
  // Log the command
  console.log(`Vehicle control: ${command}`);
  
  // In a real implementation, send to Firebase:
  // set(ref(db, "control/move"), command);
}

// Add event listeners to buttons
forwardBtn.addEventListener('click', () => handleControl('FORWARD'));
leftBtn.addEventListener('click', () => handleControl('LEFT'));
rightBtn.addEventListener('click', () => handleControl('RIGHT'));
backwardBtn.addEventListener('click', () => handleControl('BACKWARD'));
stopBtn.addEventListener('click', () => {
  handleControl('STOP');
  // Make stop button more noticeable
  stopBtn.style.transform = 'scale(1.05)';
  setTimeout(() => {
    stopBtn.style.transform = 'scale(1)';
  }, 150);
});
autoBtn.addEventListener('click', () => handleControl('AUTO MODE'));

// Keyboard controls
document.addEventListener('keydown', (event) => {
  switch(event.key.toLowerCase()) {
    case 'arrowup':
    case 'w':
      forwardBtn.click();
      event.preventDefault();
      break;
    case 'arrowleft':
    case 'a':
      leftBtn.click();
      event.preventDefault();
      break;
    case 'arrowright':
    case 'd':
      rightBtn.click();
      event.preventDefault();
      break;
    case 'arrowdown':
    case 's':
      backwardBtn.click();
      event.preventDefault();
      break;
    case ' ':
    case 'x':
      stopBtn.click();
      event.preventDefault();
      break;
    case 'enter':
    case 'm':
      autoBtn.click();
      event.preventDefault();
      break;
  }
});

// Initialize status
statusText.textContent = 'System Ready • Press any control button';

// Add active state for buttons on touch devices
document.querySelectorAll('.control-btn').forEach(button => {
  button.addEventListener('touchstart', function() {
    this.style.opacity = '0.8';
  });
  
  button.addEventListener('touchend', function() {
    this.style.opacity = '1';
  });
});
</script>
</body>
</html>
